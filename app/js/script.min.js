/* Modified: 2014-07-16, 02:42:52 */
!function(){function a(a){p.publish({channel:o,message:a})}function b(a,b){g.lineTo(a,b),g.stroke()}function c(a){if(a.preventDefault(),h){var c=i?a.targetTouches[0].pageX-f.offsetLeft:a.offsetX||a.layerX-f.offsetLeft,d=i?a.targetTouches[0].pageY-f.offsetTop:a.offsetY||a.layerY-f.offsetTop;b(c,d),q.push({x:c,y:d})}}function d(a){a.preventDefault(),h=!0,g.beginPath()}function e(b){b.preventDefault(),h=!1,a({color:document.querySelector(":checked").id,plots:q}),q=[]}var f=document.getElementById("drawCanvas"),g=f.getContext("2d");f.width=Math.min(document.documentElement.clientWidth,window.innerWidth||300),f.height=Math.min(document.documentElement.clientHeight,window.innerHeight||300),g.strokeStyle=document.querySelector(":checked").id,g.lineWidth="3";var h=!1;document.getElementById("colorSwatch").addEventListener("click",function(){g.strokeStyle=document.querySelector(":checked").id},!1);var i="ontouchstart"in window,j=navigator.pointerEnabled,k=navigator.msPointerEnabled,l=i?"touchstart":j?"pointerdown":k?"MSPointerDown":"mousedown",m=i?"touchmove":j?"pointermove":k?"MSPointerMove":"mousemove",n=i?"touchend":j?"pointerup":k?"MSPointerUp":"mouseup";f.addEventListener(l,d,!1),f.addEventListener(m,c,!1),f.addEventListener(n,e,!1);var o="draw",p=PUBNUB.init({publish_key:"pub-c-a0f0e6b6-38c6-4428-8f28-9174783b6338",subscribe_key:"sub-c-c6b57680-e3be-11e3-bff7-02ee2ddab7fe"});p.subscribe({channel:o,callback:function(a){function c(){setTimeout(function(){b(a.plots[d].x,a.plots[d].y),d++,d<a.plots.length&&c()},5)}if(console.log(a),!(a.plots.length<1)){g.strokeStyle=a.color,g.beginPath();var d=0;c()}}});var q=[]}();